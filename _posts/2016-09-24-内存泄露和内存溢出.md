---
layout:     post
title:      内存泄露和内存溢出
date:       2016-09-24 10:20:10
summary:    内存泄露和内存溢出
categories: jekyll
thumbnail: jekyll
tags:
 - Java
 - 笔记
---

**内存溢出（Out Of Memory）**，是指程序申请内存时没有足够内存空间提供，就是你要求分配的内存超出了系统能给你的，系统不能满足需求，于是产生溢出；

**内存泄露（Memory Leak）**，是指程序申请内存后无法释放内存空间，一次内内存泄露几乎没有危害，但是内存泄露累积会造成内存耗尽，从而引起内存溢出（OOM）。


内存泄露可以分为四类：

1. 常发性内存泄漏。发生内存泄漏的代码会被多次执行到，每次被执行的时候都会导致一块内存泄漏。
2. 偶发性内存泄漏。发生内存泄漏的代码只有在某些特定环境或操作过程下才会发生。常发性和偶发性是相对的。对于特定的环境，偶发性的也许就变成了常发性的。所以测试环境和测试方法对检测内存泄漏至关重要。 
3. 一次性内存泄漏。发生内存泄漏的代码只会被执行一次，或者由于算法上的缺陷，导致总会有一块仅且一块内存发生泄漏。比如，在类的构造函数中分配内存，在析构函数中却没有释放该内存，所以内存泄漏只会发生一次。 
4. 隐式内存泄漏。程序在运行过程中不停的分配内存，但是直到结束的时候才释放内存。严格的说这里并没有发生内存泄漏，因为最终程序释放了所有申请的内存。但是对于一个服务器程序，需要运行几天，几周甚至几个月，不及时释放内存也可能导致最终耗尽系统的所有内存。所以，我们称这类内存泄漏为隐式内存泄漏。 

在用户的角度来说，内存泄露并不会有什么感觉。真正有危害的是内存泄漏的堆积，这会最终消耗尽系统所有的内存。从这个角度来说，一次性内存泄漏并没有什么危害，因为它不会堆积，而隐式内存泄漏危害性则非常大，因为较之于常发性和偶发性内存泄漏它更难被检测到。
